(function(b){b.fn.linkAccordion=function(e){var a=b.extend({},{closedClass:"toggled-closed",closeText:"Close",defaultContent:0,headingElement:"h2",linkHeadings:!1,openedClass:"toggled-open",openText:"Open",slideToggle:"slow",toggleLinkClass:"section-toggle"},e);return this.each(function(e,h){var f=b(h).find(a.headingElement).eq(a.defaultContent).addClass(a.openedClass).end(),j=f.next().not(":eq("+a.defaultContent+")").hide().end(),d=function(e){var c=b(this).is(a.headingElement)?b(this):b(this).parent(), d=f.not(c),g=c.next(),h=j.not(g);g.is(":hidden")?(c.removeClass(a.closedClass).addClass(a.openedClass),d.removeClass(a.openedClass).addClass(a.closedClass),g.slideDown(a.slideToggle),h.slideUp(a.slideToggle)):(c.removeClass(a.openedClass).addClass(a.closedClass),d.removeClass(a.closedClass).addClass(a.openedClass),g.slideUp(a.slideToggle));e.preventDefault()};if(a.linkHeadings)f.click(d);else{var k=b('<a href="#"/>').addClass(a.toggleLinkClass).text(a.openText);f.each(function(a,c){b(c).append(k.clone().click(d))})}})}})(jQuery);